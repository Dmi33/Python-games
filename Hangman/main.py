import sys
import random

alphabet='йцукенгшщзхъэждлорпавыфячсмитьбю'
#Выберем слово для игры из текстового файла базы русских слов
words_base = open("RUS.txt", "r")
lines = words_base.readlines()

def word_from_file(file):
    
    """
    Выберем наугад слово для игры из текстового файла базы русских слов?
    предварительно проведя проверку на количество букв больше 3
    и наличие в нём только букв российского алфавита
    """
    
    words_base = open(file, "r")
    lines = words_base.readlines()
    
    succes = False
    while not succes:
        word_index = random.randint(0, len(lines)-1)
        word = lines[word_index][:-1]
        count = 0
        for char in word:
            if char in alphabet:
                count+=1
        if (count==len(word)) and (len(word)>3):
            succes=True
    return word

def find_letter_in_word(word,letter,print_word):
    """
    Находим положение буквы в загаданном слове, затем меняем 
    символ _ в отображаемом слове на данную букву
    """
    for i in range(len(word)):
        if letter == word[i]:
            print_word=print_word[:2*i]+letter+print_word[(2*i+1):]
    return print_word
            
def draw_hangman(num_of_errors):
    """
    Рисуем виселицу в зависимости от количства ошибок,
    совершенных игроком
    """    
    drawing_list=["""
     
    
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    _______________________$$$$$$$$$$$$$___
    _____________$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
         
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$0$0$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$_______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    _______________________$$$$$$$$$$$$$___
    _____________$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
          
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$0$0$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ___$ZZZZZ$________________$$$$$$$______
    __$$$$$$$$$_______________$$$$$$$______
    ____$$$$$_________________$$$$$$$______
    ____$$$$$_________________$$$$$$$______
    ____$$$$$_________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    _______________________$$$$$$$$$$$$$___
    _____________$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
         
    
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$0$0$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ___$ZZZZZ$________________$$$$$$$______
    __$$$$$$$$$_______________$$$$$$$______
    __$_$$$$$_________________$$$$$$$______
    __$_$$$$$_________________$$$$$$$______
    __$_$$$$$_________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    _______________________$$$$$$$$$$$$$___
    _____________$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
          
    
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$0$0$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ___$ZZZZZ$________________$$$$$$$______
    __$$$$$$$$$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    __________________________$$$$$$$______
    _______________________$$$$$$$$$$$$$___
    _____________$$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
          
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$0$0$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ___$ZZZZZ$________________$$$$$$$______
    __$$$$$$$$$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    ____$$_$$_________________$$$$$$$______
    ___$$_____________________$$$$$$$______
    ___$$_____________________$$$$$$$______
    ___$$__________________$$$$$$$$$$$$$___
    ___$$_______$$$$$$$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$""","""
         
    
    ___$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$___
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    ______Z___________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ____$X$X$_________________$$$$$$$______
    _____$$$__________________$$$$$$$______
    ___$ZZZZZ$________________$$$$$$$______
    __$$$$$$$$$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    __$_$$$$$_$_______________$$$$$$$______
    ____$$_$$_________________$$$$$$$______
    ___$$___$$________________$$$$$$$______
    ___$$___$$________________$$$$$$$______
    ___$$___$$_____________$$$$$$$$$$$$$___
    ___$$___$$__$$$$$$$$$$$$$$$$$$$$$$$$$$$
    _\_________/_______$$$$$$$$$$$$$$$$$$$$$
    __\_______/________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$
    __________________$$$$$$$$$$$$$$$$$$$$$"""] 
    print(drawing_list[num_of_errors])
    
word = word_from_file("RUS.txt")
print_word = '_ '*len(word)


game_is_on = True
k=0#счетчик ошибок
guess_list=''
while game_is_on:
    print('Загаданное слово:\n'+print_word)
    draw_hangman(k)
    

    try:
        letter = input('Введите букву: ').lower()
        if (letter not in alphabet) or (letter in guess_list) or (len(letter)>1):
            raise Exception('''Ошибка ввода''')
    except Exception:
        continue 
    guess_list=guess_list+letter   
    if letter in word:
        print_word = find_letter_in_word(word,letter,print_word)
        if '_' not in print_word:
            print('ПОЗДРАВЛЯЮ, ВЫ ПОБЕДИЛИ')
            print(f'БЫЛО ЗАГАДАНО СЛОВО {word.upper()}')
            game_is_on=False
    else:
        k+=1
    if k==6:
        draw_hangman(6)
        print('СОБОЛЕЗНУЮ, ВЫ ПРОИГРАЛИ')
        print(f'БЫЛО ЗАГАДАНО СЛОВО {word.upper()}')
        game_is_on=False
        